%define name @PACKAGE@
%define version @VERSION@
%define release 1
%define libsuffix @ERIS_LIB_SUFFIX@

Summary: A WorldForge client library.
Name: %{name}
Version: %{version}
Release: %{release}
License: GPL
Group: System Environment/Libraries
URL: http://www.worldforge.org/dev/eng/libraries/eris
Packager: Al Riddoch <alriddoch@zepler.org>
Vendor: WorldForge
Distribution: Mason
Source: %{name}-%{version}.tar.gz
BuildRoot: %{_tmppath}/%{name}-%{version}-buildroot
Requires: Atlas-C++ >= 0.5.91 wfmath >= 0.3.2 skstream > 0.3
BuildRequires: Atlas-C++-devel >= 0.5.91 wfmath-devel >= 0.3.2 skstream-devel > 0.3
Obsoletes: eris-poll-glib

%description
Eris is designed to simplify client development (and avoid repeating the same
work several times), by providing a common system to deal with the back end
tasks.

%package devel
Summary: A WorldForge client library headers and static libs.
Group: Development/Libraries
Requires: %{name} = %{version} Atlas-C++-devel wfmath-devel skstream-devel

%description devel
Eris is designed to simplify client development (and avoid repeating the same
work several times), by providing a common system to deal with the back end
tasks.

%prep
%setup

%build
CXXFLAGS=$RPM_OPT_FLAGS %configure --enable-static
make

%install
rm -rf $RPM_BUILD_ROOT
%makeinstall

%clean
rm -rf $RPM_BUILD_ROOT

%files
%defattr(-,root,root)
%{_libdir}/lib*.so.*
%doc AUTHORS COPYING NEWS README

%files devel
%defattr(-,root,root)
%{_libdir}/lib*.so
%{_libdir}/lib*.la
%{_libdir}/lib*.a
%{_libdir}/pkgconfig/eris%{libsuffix}.pc
%{_includedir}/Eris%{libsuffix}
